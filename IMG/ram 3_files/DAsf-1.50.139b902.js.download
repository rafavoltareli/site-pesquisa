!function(){function e(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function t(e,t,a,n,i,o){try{let s=null;if(window.XMLHttpRequest?s=new XMLHttpRequest:o(),s){if(s.onreadystatechange=()=>{i(s)},s.open(t,e,!0),null!==n)for(const e in n)s.setRequestHeader(e,n[e]);s.send(a)}else o()}catch(e){o()}}class a{logTrace(e,t){if(void 0!==this.traceId){let a;const n=(new Date).getTime();this.storedTrace.hasOwnProperty(e)||(this.storedTrace[e]=[]);t===Object(t)?a=Object.assign&&"function"==typeof Object.assign?Object.assign({},t):JSON.parse(JSON.stringify(t)):(a='{ "'+e+'":"'+t+'"}',a=JSON.parse(a)),a.timeStamp=n,a.timeSinceAdStart=n-this.adStartTime,this.storedTrace[e].push(a)}}constructor(a,n){e(this,"traceId",void 0),e(this,"adStartTime",void 0),e(this,"storedTrace",void 0),e(this,"allData",void 0),this.traceId=a,this.adStartTime=n,this.storedTrace={};void 0!==a&&(()=>{const e=()=>{const e=()=>{console.log("failed to send request to /gp/adbarplus")},a=t=>{4===t.readyState&&200!==t.status&&e()};if(!(e=>{for(const t in e)if(e.hasOwnProperty(t))return!1;return!0})(this.storedTrace)){t("/gp/adbarplus?traceId="+this.traceId+"&systemName=browser","POST",JSON.stringify(this.storedTrace),{"Content-Type":"application/x-www-form-urlencoded"},a,e);for(const e in this.storedTrace)this.storedTrace.hasOwnProperty(e)&&delete this.storedTrace[e]}},a=(e,t)=>()=>e.apply(t),n=()=>{e()},i=()=>{e(),window.setInterval(a(n,this),3e3)};"loading"!==document.readyState?a(i,this)():window.addEventListener("load",a(i,this))})()}}var n,i,o,s,r,d,l;(i=n||(n={})).START="adload:start",i.CALLBACK="adload:delayloadcallback",i.IFRAME_CREATED="adload:iframecreated",(s=o||(o={})).SF_LIBRARY="cache:sflibrary:",s.SF_HTML="cache:sfhtml:",(d=r||(r={})).REQUEST="adfeedback:request",d.SUCCESS="adfeedback:success",d.ERROR="adfeedback:error",d.LABEL_RENDER="adfeedback:sponsoredlabelrender",(l||(l={})).API="messenger:";const c={1:"abpstatus:enabled",0:"abpstatus:notenabled","-1":"abpstatus:unknown"},u={VERSION:"sfversion"};var p,m;(m=p||(p={})).NEXUS_CLIENT_NOT_DEFINED="ResourceTimingData.NexusClientNotDefined",m.LOGGING_FAILED="ResourceTimingData.LoggingFailed",m.LOGGING_SUCCESSFUL="ResourceTimingData.LoggingSuccessful",m.DEPENDENCIES_NOT_MET="ResourceTimingData.DependenciesNotMet";const f={ALLOWLISTED:"custommessage:allowlisted",NOT_ALLOWLISTED:"custommessage:notallowlisted"};var h,w,g,E,S,y,v,T,I,b;(w=h||(h={})).PAGE_PRERENDER="pixelcondition:pageprerender",w.AD_MISSING="pixelcondition:admissing",(E=g||(g={})).START="bb",E.SCOPE_NAME="sfImpression",E.POLLING_SCOPE="PollingSfImpression",(y=S||(S={})).START="adload_start",y.CALLBACK="adload_delayload",y.IFRAME_CREATED="adload_iframecreated",(T=v||(v={})).SF_LIBRARY="sflibrary_",T.SF_HTML="sfhtml_",(b=I||(I={})).REQUEST="adfeedback_request",b.SUCCESS="adfeedback_success",b.ERROR="adfeedback_error",b.LABEL_RENDER="adfeedback_sponsoredlabelrender";const A={1:"abpstatus_enabled",0:"abpstatus_notenabled","-1":"abpstatus_unknown"};var R,D,_,N;function L(e,t,a,n,i,s){if("undefined"==typeof performance||void 0===performance.getEntriesByType)return;const r=performance.getEntriesByType("resource");if(void 0===r||!Array.isArray(r)||r.length<1||void 0===r[0].duration)return;const d=e=>{i(a,n,e,1)},l=void 0!==r[0].transferSize?(e,t,i)=>{0===e.transferSize?(d(t+"cached"),s(i+"cached",a,n)):(d(t+"uncached"),s(i+"uncached",a,n))}:(e,t,i)=>{e.duration<20?(d(t+"fastload"),s(i+"fastload",a,n)):(d(t+"slowload"),s(i+"slowload",a,n))},c=(e,t,a)=>{if(e)for(let n=0;n<r.length;n++){const i=r[n];if(i.name&&-1!==i.name.indexOf(e))return void l(i,t,a)}};c(e,o.SF_LIBRARY,v.SF_LIBRARY),c(t,o.SF_HTML,v.SF_HTML)}(R||(R={})).VERSION="sfversion_",(_=D||(D={})).LOGGING_FAILED="resourceTimingData_LoggingFailed",_.LOGGING_SUCCESSFUL="resourceTimingData_LoggingSuccessful",_.DEPENDENCIES_NOT_MET="resourceTimingData_DependenciesNotMet",_.DEPENDENCIES_MET="resourceTimingData_DependenciesMet";var M,O=new RegExp(/((&#[0-9]{2};)|(&#[0-9]{3};)|(&#[0-9]{4};)|(&[a-z]{2};)|(&[a-z]{3};)|(&[a-z]{4};)|(&[a-z]{5};)|(&[a-z]{6};)|(&[a-z]{7};)|(%[a-fA-F0-9]{2})|(\W))pd_rd_plhdr(=|%3D)t((&#[0-9]{2};)|(&#[0-9]{3};)|(&#[0-9]{4};)|(&[a-z]{2};)|(&[a-z]{3};)|(&[a-z]{4};)|(&[a-z]{5};)|(&[a-z]{6};)|(&[a-z]{7};)|(%[a-fA-F0-9]{2})|(\W))/),C="$1",k="$14";M=function(){return document};var F="data-val";function x(e){if("string"!=typeof e||""===e)return"";var t=M().getElementById("ape_"+e+"_placement_ClickTracking");if(!(t&&t.hasAttribute&&"function"==typeof t.hasAttribute&&t.hasAttribute(F)&&t.getAttribute&&"function"==typeof t.getAttribute))return"";var a=t.getAttribute(F);return"string"!=typeof a?"":a}N=function(e,t,a){return x([e,a,t].join("_"))};const z=e=>{if(!("pageType"in e)||!("subPageType"in e)||!("slotName"in e))return"";try{return N(e.pageType,e.subPageType,e.slotName)}catch(e){return""}},B=()=>window.P&&window.P.AUI_BUILD_DATE,H=(e,t,a)=>{var n;return B()&&"function"==typeof(null===window||void 0===window||null===(n=window.P)||void 0===n?void 0:n.guardError)?P.guardError("APE-SafeFrame",e):(...n)=>{try{e(...n)}catch(e){"function"==typeof t&&a&&t(a,e)}}},U=(e,t)=>{if(e&&t)for(const a in t)e.style[a]=t[a];return e},V={1027:"Sponsored Display DRA"},G={1:"Enabled",0:"NotEnabled","-1":"Unknown"},J=e=>(e=>{let t,a="";const n=e.length;for(let i=0;i<n;i++)t=e[i],a+=String.fromCodePoint(t>251&&t<254&&i+5<n?1073741824*(t-252)+(e[++i]-128<<24)+(e[++i]-128<<18)+(e[++i]-128<<12)+(e[++i]-128<<6)+e[++i]-128:t>247&&t<252&&i+4<n?(t-248<<24)+(e[++i]-128<<18)+(e[++i]-128<<12)+(e[++i]-128<<6)+e[++i]-128:t>239&&t<248&&i+3<n?(t-240<<18)+(e[++i]-128<<12)+(e[++i]-128<<6)+e[++i]-128:t>223&&t<240&&i+2<n?(t-224<<12)+(e[++i]-128<<6)+e[++i]-128:t>191&&t<224&&i+1<n?(t-192<<6)+e[++i]-128:t);return a})(((e,t)=>{const a=e.replace(/[^A-Za-z0-9+/]/g,""),n=a.length,i=t?Math.ceil((3*n+1>>2)/t)*t:3*n+1>>2,o=new Uint8Array(i);let s,r,d=0,l=0;for(let e=0;e<n;e++)if(r=3&e,d|=((c=a.charCodeAt(e))>64&&c<91?c-65:c>96&&c<123?c-71:c>47&&c<58?c+4:43===c?62:47===c?63:0)<<6*(3-r),3===r||n-e==1){for(s=0;s<3&&l<i;)o[l]=d>>>(16>>>s&24)&255,s++,l++;d=0}var c;return o})(e));function W(e){return window[e]&&"object"==typeof window[e].adDetails?window[e].adDetails:null}function j(e,t,a,n,i){let o;if(function(e){e.bb="uet",e.af="uet",e.cf="uet",e.be="uet",e.ld="uex"}(o||(o={})),!o.hasOwnProperty(e))return;const s=o[e].toString(),r=n?n+":":"";"function"==typeof window[s]&&(window[s].apply(this,Q(e,"adplacements:"+r+t.replace(/_/g,":"),{wb:1},i)),a&&window[s].apply(this,Q(e,"adplacements:"+r+a,{wb:1},i)))}function q(e,t,a,n){if(window.ue&&"function"==typeof window.ue.count){let i="adplacements:"+a;if(e&&(i+=":"+e.replace(/_/g,":")),window.ue.count(i,n),t){const e="adplacements:"+(a&&t?a+":":a)+t;window.ue.count(e,n)}}}function Y(e,t,a,n){if(window.ue&&window.ue.tag){if(t){const a=e+":"+t.replace(/_/g,":")+(n?":"+n:"");window.ue.tag(a)}if(a){const t=e+":"+a+(n?":"+n:"");window.ue.tag(t)}t||a||window.ue.tag(e+(n?":"+n:""))}}function Q(e,t,a,n){const i=[e,t,a];return n&&i.push(n),i}const X=()=>window.innerHeight||document.documentElement.clientHeight,K=()=>window.innerWidth||document.documentElement.clientWidth,$=e=>e.getBoundingClientRect().top-X(),Z=e=>{const t={atf:ee(e)};if(!e||!window||!document)return t;const a=oe(),n=se(e),i=le(e);return{atf:ee(e),geom:{win:a,self:n,exp:i},payload:{wh:a.h,ww:a.w,sx:window.scrollX,sy:window.scrollY,ah:n.h,aw:n.w,top:n.t,left:n.l}}},ee=e=>{if(!e)return"unknown";const t=function(e){if(!window||!(null===document||void 0===document?void 0:document.body))return null;const t=re(e,null),a=X(),n=K(),i=document.body.getBoundingClientRect(),o=Math.max(0,Math.min(i.left+n,t.r)-t.l),s=Math.max(0,Math.min(i.top+a,t.b)-t.t),r=o*s/(t.h*Math.min(t.w,n));return Number(Math.min(1,Math.max(0,r)).toFixed(2))}(e);return null==t?"unknown":t>=.5};const te=e=>{if(!window||!document)return null;const t=ne(e),a=oe(),n=se(null,t);return{atf:"unknown",geom:{win:a,self:n,exp:le(null,t)},payload:{wh:a.h,ww:a.w,sx:window.scrollX,sy:window.scrollY,ah:n.h,aw:n.w,top:n.t,left:n.l}}},ae=(e,t)=>{const a=re(e),n=re(t),i=K(),o=X();return a&&n&&(Math.abs(a.t-n.b)<o||Math.abs(a.b-n.t)<o)&&(Math.abs(a.l-n.r)<i||Math.abs(a.r-n.l)<i)},ne=e=>{const t=e.initialBoundingRect,a=t.top-(window.scrollY-e.originalScrollY),n=a+e.adHeight,i=t.left-(window.scrollX-e.originalScrollX);return{top:a,bottom:n,left:i,right:i+e.adWidth,width:e.adWidth,height:e.adHeight}},ie=(e,t,a)=>{let n=0;return"visible"!==document.visibilityState?n:(n=e>0?a-e:t>0?Math.min(t,a):0,Math.min(n,t-e))},oe=()=>{const e=window.screenY?window.screenY:window.screenTop,t=window.screenX?window.screenX:window.screenLeft,a=K(),n=X();return{t:e,l:t,w:a,h:n,b:e+n,r:t+a}},se=(e,t)=>{const a=re(e,t),n=de(a);return{t:a.t,l:a.l,r:a.r,b:a.b,w:a.w,h:a.h,z:a.z,xiv:n.xiv,yiv:n.yiv,iv:n.iv}},re=(e,t)=>{const a=t||(null==e?void 0:e.getBoundingClientRect());return{t:a.top,l:a.left,r:a.right,b:a.bottom,w:a.width,h:a.height,z:e?Number(window.getComputedStyle(e,null).zIndex):NaN}},de=e=>{const t=K(),a=X(),n=Math.max(0,ie(e.t,e.b,a)),i=Math.max(0,ie(e.l,e.r,t)),o=n*i,s=e.h*Math.min(e.w,t);return 0!==s||0!==o?{xiv:Number(Math.min(1,i/e.w).toFixed(2)),yiv:Number(Math.min(1,n/e.h).toFixed(2)),iv:Number(Math.min(1,Math.max(0,o/s)).toFixed(2))}:{xiv:0,yiv:0,iv:0}},le=(e,t)=>{const a=t||(null==e?void 0:e.getBoundingClientRect());return{t:a.top,l:a.left,r:K()-a.right,b:X()-a.bottom,xs:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth)>K()?1:0,yx:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)>X()?1:0}};function ce(e,t,a){var n,i=a||{},o=i.noTrailing,s=void 0!==o&&o,r=i.noLeading,d=void 0!==r&&r,l=i.debounceMode,c=void 0===l?void 0:l,u=!1,p=0;function m(){n&&clearTimeout(n)}function f(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];var r=this,l=Date.now()-p;function f(){p=Date.now(),t.apply(r,i)}function h(){n=void 0}u||(d||!c||n||f(),m(),void 0===c&&l>e?d?(p=Date.now(),s||(n=setTimeout(c?h:f,e))):f():!0!==s&&(n=setTimeout(c?h:f,void 0===c?e-l:e)))}return f.cancel=function(e){var t=(e||{}).upcomingOnly,a=void 0!==t&&t;m(),u=!a},f}const ue="ERROR";function pe(e,t){const a=t||new Error(e);console.error(e,t),q("",null,"safeFrameError",1),window.sfHostLogErrors&&(window.ueHostLogError?window.ueHostLogError(a,{logLevel:ue,attribution:"APE-safeframe",message:e+" "}):"undefined"!=typeof console&&console.error&&console.error(e,a))}const me=()=>{const e=window.location.hostname.split(".").pop();let t="na";return/^(com|ca|mx|br)$/.test(e)?t="na":/^(uk|de|fr|it|es|in|ae|sa|nl|tr|se|pl|eg|be)$/.test(e)?t="eu":/^(jp|au|sg)$/.test(e)?t="fe":/^(cn)$/.test(e)&&(t="cn"),"https://images-"+t+".ssl-images-amazon.com"},fe=e=>e.replace(/^.{1,5}:\/\/|^\/\//,""),he=(e,t)=>e.height===t.height&&e.width===t.width,we=(e,t,a)=>{if(!t||"object"!=typeof t)return!1;for(let n=0,i=t.length;n<i;n++)if(a(e,t[n]))return!0;return!1},ge=()=>"IntersectionObserver"in window&&"IntersectionObserverEntry"in window,Ee=e=>e&&0===Object.keys(e).length&&e.constructor===Object;function Se(e,t,a){const n=document.createElement("iframe");return n.name=JSON.stringify(e),n.id=t,n.src=a,n.height=Ie(e.size.height)||"250px",n.width=Ie(e.size.width)||"300px",n.className=e.iframeClass||"",n.setAttribute("frameborder","0"),n.setAttribute("marginheight","0"),n.setAttribute("marginwidth","0"),n.setAttribute("scrolling","no"),n.setAttribute("allowtransparency","true"),n.setAttribute("data-arid",e.arid),n.style.cssText=e.iframeExtraStyle||"",n.sandbox="allow-scripts allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-top-navigation-by-user-activation",n}function ye(e){const t=document.getElementById(e);void 0!==t&&t&&(t.style.display="none")}function ve(e,t,a){const n=document.getElementById(t[e].placementDivId),i=document.getElementById(t[e].wrapperDivId)||n,o=document.getElementById(t[e].iframeId);let s=a.resizePlacementWidthThreshold;const r=a.resizePlacementStyleAboveThreshold,d=a.resizePlacementStyleBelowThreshold;s=parseInt(s,10),i&&o&&s&&r&&d&&(i.offsetWidth<s?U(o,d):U(o,r))}function Te(e,t,a,n,i,o){try{const s=document.getElementById(o[e].placementDivId),r=document.getElementById(o[e].wrapperDivId)||s,d=document.getElementById(o[e].iframeId);if(null===r||null===s||null===d)return;const l=be(a),c=be(t),u=!c&&!l,p=parseInt(t,10);let m=c?d.offsetWidth:p,f=l?d.offsetHeight:parseInt(a,10);const h=parseInt(n,10),w=e=>{u&&(f=Math.round(e*f/m)),m=Math.round(e)},g=0===r.offsetWidth?K():r.offsetWidth;h&&X()<K()?w(h):w(g),i&&i.adMap&&i.adMap[e]&&i.adMap[e].options&&i.adMap[e].options.slotSnapshot&&(i.adMap[e].options.slotSnapshot.adHeight=f,i.adMap[e].options.slotSnapshot.adWidth=m);const E=Ie(m),S=Ie(u?f:a);d.style.height=S,d.style.width=E;const y={width:E,height:S};r!==s&&(s.style.height=S,i.sendMessageToAd(e,"resizeCreativeWrapper",y)),"Detail_hero-quick-promo_Desktop"===o[e].slotId&&(q(o[e].slotId,i.adMap[e].options.placementId,"OffsetLeft",d.offsetLeft),q(o[e].slotId,i.adMap[e].options.placementId,"OffsetTop",d.offsetTop),q(o[e].slotId,i.adMap[e].options.placementId,"OffsetWidth",d.offsetWidth),q(o[e].slotId,i.adMap[e].options.placementId,"OffsetHeight",d.offsetHeight))}catch(t){pe("Error resizing ad: "+o[e].slotId,t)}}function Ie(e){return!e||be(e)||function(e){return e.length>2&&"px"===e.substring(e.length-2)}(e)?e:e+"px"}function be(e){return e.length>1&&"%"===e.charAt(e.length-1)}function Ae(e,t,a,n,i){const o="undefined"!=typeof P,s="undefined"!=typeof amznJQ,r="number"==typeof a&&0!==a?()=>{setTimeout(t,a)}:t,d=!!i&&JSON.parse(i);if(void 0===e)r();else if("windowOnLoad"===e)"complete"===document.readyState?r():window.addEventListener("load",r);else if("spATFEvent"===e)o?P.when("search-page-utilities").execute((e=>{window.searchPageUtils.afterEvent("spATFEvent",r)})):s?amznJQ.available("search-js-general",(()=>{window.SPUtils.afterEvent("spATFEvent",r)})):r();else if("aboveTheFold"===e)o?P.when("af").execute(r):s?amznJQ.onCompletion("amznJQ.AboveTheFold",r):r();else if("criticalFeature"===e)o?P.when("cf").execute(r):s?amznJQ.onCompletion("amznJQ.criticalFeature",r):r();else if("r2OnLoad"===e)o?P.when("r2Loaded").execute(r):s?amznJQ.onReady("r2Loaded",r):r();else if(e.match("[^:]+:.+")){const t=e.split(":"),a=t[0].split("."),n=t[1],i=t.length>2?t[2]:n;o?P.when(i,"A").execute(r):s&&a.length>1?amznJQ[a[1]](n,r):r()}else if(e.match(/^\d{1,4}px$/g))Re(parseInt(e,10),r,n,d,((e,t)=>{const a=$(e);return e&&a<=t}));else{const t=/^reached(\d{1,5}px)FromTop$/g.exec(e);t?Re(parseInt(t[1],10),r,n,d,((e,t)=>window.scrollY+X()>=t)):r()}}function Re(e,t,a,n,i){let o=!1;const s=()=>{i(a,e)&&(t(),o=!0)},r=H(ce(20,(()=>{s(),o&&(window.removeEventListener("scroll",r),window.removeEventListener("resize",r))})));window.addEventListener("scroll",r),window.addEventListener("resize",r),n&&s()}const De=new class{customMessage(e,t,a,n,i){const o=this.msgListeners;try{"undefined"!==a&&Array.isArray(a)&&(a.indexOf(e)>-1&&o[e]?(q(null,null,f.ALLOWLISTED+":"+e,1),o[e](t)):-1===a.indexOf(e)?(q(null,null,f.NOT_ALLOWLISTED,1),q(n,i,f.NOT_ALLOWLISTED,1)):pe("Unrecognized custom message key: "+e))}catch(e){pe("Custom Message Error",e)}}isElementInDOM(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}constructor(t,a,n){e(this,"adMap",void 0),e(this,"supportedCommands",void 0),e(this,"msgListeners",void 0),e(this,"getIframe",(e=>{var t;const a=this.adMap,n=a[e].options;if(Ee(a)||Ee(n))return null;const i="ape_"+n.slot+"_iframe";return a[e].iframe&&(a[e].iframe=a[e].iframe&&(null===(t=a[e].iframe)||void 0===t?void 0:t.innerHTML)?a[e].iframe:document.getElementById(i)),a[e].iframe})),e(this,"sendMessageToAd",((e,t,a)=>{const n=this.getIframe(e),i=n?n.contentWindow:null;if(i){const e={command:t,data:a};i.postMessage(e,"*")}})),e(this,"receiveMessage",(e=>{const t=this.adMap;if(Ee(t))return;try{var a,n,i,o;if((null===(o=null==e||null===(a=e.data)||void 0===a||null===(n=a.message)||void 0===n||null===(i=n.id)||void 0===i?void 0:i.toLowerCase())||void 0===o?void 0:o.indexOf("mash"))>-1)throw"Received Mash message"}catch(e){return}const s=e.data,r=t[s.arid];try{const t=this.supportedCommands,a=((e,t)=>{const a=me();return e&&e.options&&fe(t.origin)===fe(a)})(r,e);if("object"!=typeof s.data||!t.hasOwnProperty(s.command))return;if(!a)throw"Invalid Message Origin: "+e.origin;const n=t[s.command];n&&(r.options.debug&&"undefined"!=typeof console&&console.log(e),n(r,s.data))}catch(t){let a="Problem with message: "+e.data;void 0!==s&&(a+=this.appendErrorDetails(s.arid)),pe(a,t)}})),e(this,"appendErrorDetails",(e=>{const t=this.adMap;if(Ee(t))return"";let a="";if(void 0!==t[e]){const n=t[e].options;void 0!==n.aanResponse&&(a=" Ad Details: "+JSON.stringify(n.aanResponse))}return a})),e(this,"registerCustomMessageListener",((e,t,a)=>{let n=!1;const i=this.msgListeners;try{if(!i[e]||"function"!=typeof i[e]||a)i[e]=t,n=!0;else{pe("Duplicate Key",new Error("Custom message listener already exists for key: "+e))}}catch(e){pe("Error registering custom message listener",e)}return n})),e(this,"sendCustomMessage",((e,t)=>{const a=this.adMap,n={key:e,data:t};for(const e in a)this.sendMessageToAd(e,"customMessage",n)})),e(this,"sendCustomMessageToAd",((e,t,a)=>{const n={key:t,data:a};this.sendMessageToAd(e,"customMessage",n)})),e(this,"takeSnapshotOfSlotPosition",(e=>{const t=this.adMap,a=t&&t[e]&&t[e].options;if(!t||Ee(t)||!a||Ee(a))return;const n=this.getIframe(e);var i;this.adMap[e].options.slotSnapshot={initialBoundingRect:(i=n).getBoundingClientRect(),adHeight:i.offsetHeight,adWidth:i.offsetWidth,originalScrollX:window.scrollX,originalScrollY:window.scrollY}})),e(this,"startPixelTracking",((e,t)=>{let a="prerender"!==document.visibilityState;const n=this.getIframe(e);let i,o,s=this.isElementInDOM(n);const r=this.adMap&&this.adMap[e]&&this.adMap[e].options;!a&&r&&q(r.slot,r.placementId,h.PAGE_PRERENDER,1),!s&&r&&q(r.slot,r.placementId,h.AD_MISSING,1);const d=()=>!(!a||!s)&&(t(),o&&document.removeEventListener("visibilitychange",o),i&&ge()&&i.unobserve(n),!0);if(!d()){const e={root:document.documentElement};ge()&&(i=new IntersectionObserver((e=>{try{if(1===e.length){e[0].isIntersecting?(s=!0,d()):s=!1}}catch(e){pe("Error executing intersectionObserver callback")}}),e),i.observe(n)),o=()=>{try{"prerender"!==document.visibilityState?(a=!0,d()):a=!1}catch(e){pe("Error executing pageVisibilityHandler callback")}},document.addEventListener("visibilitychange",o)}})),e(this,"updateViewability",(e=>{const t=this.adMap,a=t&&t[e]&&t[e].options;if(!t||Ee(t)||!a||Ee(a))return;const n=this.getIframe(e),i=t[e].options.viewabilityStandards,o=Z(n);null!==o&&(o.viewabilityStandards=i,this.sendMessageToAd(e,"updateViewability",o))})),e(this,"updateNoInventoryViewability",(e=>{const t=this.adMap,a=t&&t[e]&&t[e].options,n=a&&a.slotSnapshot;if(!t||Ee(t)||!a||Ee(a)||!n)return;const i=a.viewabilityStandards,o=te(n);null!==o&&(o.viewabilityStandards=i,this.sendMessageToAd(e,"updateViewability",o))})),this.adMap=t||{},this.supportedCommands=a||{},this.msgListeners=n||{}}};const _e=new class{constructor(){e(this,"latencyPlugin",void 0),e(this,"events",void 0)}},Ne=e=>{window.csa?_e.latencyPlugin=window.csa("Content",{element:e}):console.log(window)},Le=(e,t)=>{try{_e.latencyPlugin("mark",e,t)}catch(e){pe("Error with initiating CSA",e)}},Me=(e,t,a)=>{try{_e.events("log",{schemaId:"ApeSafeframe.csaEvent.1",metricName:e+":"+t+":"+a,metricValue:1},{ent:"all"})}catch(e){pe("Error with initiating CSA",e)}},Oe=e=>{try{_e.events("setEntity",{adCreativeMetaData:e})}catch(e){pe("Error with initiating CSA",e)}};function Pe(e,t,a){const n=ke(e,t);if(!n)return;(n.getElementsByTagName("div")[0]||Fe("div",{},t.advertisementStyle,n,null)).innerHTML=J(t.adFeedbackInfo.sponsoredText),a[t.arid].logTrace("adFeedBack",{renderSponsoredLabel:!0}),q(t.slot,t.placementId,r.LABEL_RENDER,1),Me(I.LABEL_RENDER,t.slot,t.placementId)}function Ce(e,a,n){const i=ke(e,a);if(!i)return;e.isFeedbackLoaded=!0;const o=e.parentNode,s=a.placementId,d=a.adFeedbackInfo.endPoint,l=a.feedbackDivStyle,c={adPlacementMetaData:a.adPlacementMetaData,adCreativeMetaData:a.adCreativeMetaData},u={isFeedbackLoaded:e.isFeedbackLoaded,slot:o,placementId:s,endPoint:d,feedbackDivStyle:l,adFeedbackParams:c,requestUrl:""},p=e=>{const t={feedbackResponseStarted:!0,feedBackResponseReturned:!1,response:""};if(4===e.readyState){if(200===e.status)try{const n=e.responseText,o=JSON.parse(n);if(t.response=o,o&&"ok"===o.status){if("html"in o&&o.html&&(i.innerHTML=o.html),"script"in o&&o.script){(i.getElementsByTagName("script")[0]||Fe("script",{},{},i,null)).innerHTML=o.script}q(a.slot,s,r.SUCCESS,1),Me(I.SUCCESS,a.slot,s),t.feedBackResponseReturned=!0}}catch(e){q(a.slot,a.placementId,r.ERROR,1),Me(I.ERROR,a.slot,a.placementId)}n[a.arid].logTrace("adFeedBack",{adFeedBackResponse:t})}},m=d&&d.length?window.location.protocol+"//"+window.location.hostname+d+"?pl="+(f=c,encodeURIComponent(JSON.stringify(f))):d;var f;u.requestUrl=m,n[a.arid].logTrace("adFeedBack",{adFeedbackRequest:u}),m&&(q(a.slot,s,r.REQUEST,1),Me(I.REQUEST,a.slot,s),t(m,"GET",null,null,p,(()=>{})))}function ke(e,t){if(!e||!t.adFeedbackInfo.boolFeedback||e.isFeedbackLoaded)return null;const a=e.parentNode,n=t.feedbackDivStyle,i=t.adFeedbackInfo.adFeedbackOnTop;return a.getElementsByTagName("div")[0]||Fe("div",{id:a.id+"_Feedback"},n,a,i?a.firstChild:null)}function Fe(e,t,a,n,i){const o=document.createElement(e);for(const e in t)o.setAttribute(e,t[e]);return U(o,a),n.insertBefore(o,i),o}const xe=e=>{e.fallbackStaticAdClickUrl&&((e=>{let t="";return e&&(t=e.indexOf("//")>-1?e.split("/")[2]:e.split("/")[0]),0!==t.length})(e.fallbackStaticAdClickUrl)||(e.fallbackStaticAdClickUrl=window.location.protocol+"//"+window.location.host+e.fallbackStaticAdClickUrl))},ze={};function Be(e,t,a){e&&e.id&&!ze[e.id]&&window.P&&B()&&window.P.when("gw-video-orchestrator").execute((n=>{n.subscribe(e,t,a),ze[e.id]=!0}))}let He=null;function Ue(e,t,a){const n=t=>{a.sendCustomMessageToAd(e.options.arid,"videoAutoplayResponse",t)};var i;e.options.expParams&&e.options.expParams.noVideoAutoplay?n(!1):(i=e.options.pageType)&&"gateway"===i.toLowerCase()?Be(e.iframe,n,t):He===e.options.arid?n(!0):null===He&&function(e){const t=document.getElementsByTagName("video");for(let a=0;a<t.length;++a)if(!t[a].paused&&ae(e,t[a]))return!1;return!0}(e.iframe)?(He=e.options.arid,n(!0)):n(!1)}function Ve(){B()&&window.P&&window.P.when("gw-video-orchestrator").execute((e=>{e.elect()})),He=null}function Ge(e){var t;(t=e.iframe)&&window.P&&B()&&window.P.when("gw-video-orchestrator").execute((e=>{e.elect(t)})),He=e.options.arid}const Je="unfired_cod_impressions_dictionary";function We(){let e;try{e=JSON.parse(localStorage.getItem(Je)||"{}")}catch(t){e={}}return e}function je(){try{localStorage.removeItem(Je)}catch(e){}}function qe(e,t){const a=We();a[e]=t,Xe(a)}function Ye(){const e=We(),t=[];for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&""!==e[a]&&t.push(e[a]);return je(),t}function Qe(e){const t=We();t[e]&&(t[e]="",Xe(t))}function Xe(e){try{localStorage.setItem(Je,JSON.stringify(e))}catch(e){}}var Ke,$e,Ze,et,tt,at;($e=Ke||(Ke={})).IMPRESSION="localstorage:impression",$e.ERROR="localstorage:error",$e.CONTROL="localstorage:inactive",$e.TREATMENT="localstorage:t1",$e.NO_WEBLAB="localtestorage:missing",(et=Ze||(Ze={})).IMPRESSION="localstorage_impression",et.ERROR="localstorage_error",et.CONTROL="localstorage_inactive",at=function(){return URL};var nt="{}",it="?",ot="&",st="=";function rt(e,t){var a={};for(var n in e)a[n]=e[n];for(var i in t)a[i]=t[i];return a}tt=function(e,t,a){if("string"!=typeof e||""===e)throw new Error("Invalid url input to addJSONQueryParamToURL: "+JSON.stringify({url:e}));if("string"!=typeof t||""===t)throw new Error("Invalid queryParamKey input to addJSONQueryParamToURL: "+JSON.stringify({queryParamKey:t}));if("object"!=typeof a)throw new Error("Invalid queryParamValueObject input to addJSONQueryParamToURL: "+JSON.stringify({queryParamValueObject:a}));try{var n=new(at())(e),i=n.searchParams.get(t)?n.searchParams.get(t):"{}",o=JSON.parse(i);if("object"!=typeof o)throw new Error("Existing query param value was not an object: "+JSON.stringify({existingJSONObject:o}));var s=rt(o,a);return n.searchParams.set(t,JSON.stringify(s)),n.toString()}catch(n){return function(e,t,a){var n,i=e.indexOf(it),o={};if(i>0){n=e.substring(0,i),decodeURIComponent(e.substring(i+1)).split(ot).forEach((function(e){if(e){var t=e.split(st);o[t[0]]=t[1]}}));var s=o[t]?o[t]:nt,r=JSON.parse(s);if("object"!=typeof r)throw new Error("Existing query param value was not an object: "+JSON.stringify({existingJSONObject:r}));var d=rt(r,a);o[t]=JSON.stringify(d)}else n=e,o[t]=JSON.stringify(a);var l=[];for(var c in o)l.push(encodeURIComponent(c)+st+encodeURIComponent(o[c]));return n+it+l.join(ot)}(e,t,a)}};const dt=(e,t)=>{const a=!(!e.options.expParams||!e.options.expParams.enableViewabilityTrackerOnLoad)&&JSON.parse(e.options.expParams.enableViewabilityTrackerOnLoad),n=()=>{try{Qe(e.options.arid),De.sendMessageToAd(e.options.arid,"fireImpression",t),lt(!a,e,t)}catch(e){pe("Error firing pixels. data: "+JSON.stringify(t))}};lt(a,e,t);const i=H((()=>{De.startPixelTracking(e.options.arid,n)}));Ae(e.options.firePixelsAfter,i,0,e.slot,e.options.expParams?e.options.expParams.firePositionTrackerOnLoad:"false")},lt=(e,t,a)=>{e&&(a.isNoInventory?De.supportedCommands.enableNoInventoryViewabilityTrackerAndInvokeFallback(t):De.supportedCommands.enableViewabilityTracker(t))};function ct(e){De.startPixelTracking(e.options.arid,(()=>{try{if(e.options.aaxImpPixelUrl){const t=tt(e.options.aaxImpPixelUrl,"pj",{measurementMethod:"cod_client"});qe(e.options.arid,t)}De.sendMessageToAd(e.options.arid,"fireMetricsForLegacyImpression",{})}catch(e){pe("Error firing legacy impression metrics")}}))}function ut(e,t){De.startPixelTracking(e.options.arid,(()=>{try{De.sendMessageToAd(e.options.arid,"fireMetricsForCremPolling",{isBtr:t.isBtr})}catch(e){pe("Error firing crem polling impression metrics")}}))}const pt={sd:1},mt=["name","entryType","startTime","duration","initiatorType","nextHopProtocol","workerStart","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","transferSize","encodedBodySize","decodedBodySize"];class ft{log(){if(!(window.ue&&window.ue.event&&window.ue.attach))return q(null,null,p.DEPENDENCIES_NOT_MET,1),void Me(D.DEPENDENCIES_NOT_MET,this.options.slot,this.options.placementId);q(null,null,p.DEPENDENCIES_NOT_MET,0),Me(D.DEPENDENCIES_MET,this.options.slot,this.options.placementId),"complete"===document.readyState?this.logMessage():window.ue.attach("load",this.logMessage)}extractResourceProperties(e){let t={};const a={};for(let n=0;n<mt.length;n++)t=mt[n],void 0!==e[t]&&(a[t]=e[t]);return a}getPageInfo(){return{source:"safeframe",pageType:window.ue_pty||null,subPageType:window.ue_spty||null,pageTypeId:this.getPageTypeIdKey()||null}}getPageTypeIdKey(){return this.options.slot+"_"+this.options.adCreativeMetaData.adNetwork+"_"+this.options.adCreativeMetaData.adProgramId+"_"+this.options.adCreativeMetaData.adCreativeId+"_"+this.options.adCreativeMetaData.adId}getResources(){const e=[];for(let t=0;t<this.data.resourceTimingData.length;t++){const a=this.data.resourceTimingData[t];0!==a.responseEnd&&e.push(this.extractResourceProperties(a))}return e}composeMessage(){const e=this.getPageInfo();return e.resourceData=this.getResources(),e}logMessage(){const e=this.composeMessage();let t=!1;window.ue.event&&(t=window.ue.event(e,"adplacements","csm.ResourceTimingHit.2",pt),t?(q(null,null,p.LOGGING_SUCCESSFUL,1),q(null,null,p.LOGGING_FAILED,0),Me(D.LOGGING_SUCCESSFUL,this.options.slot,this.options.placementId)):(q(null,null,p.LOGGING_SUCCESSFUL,0),q(null,null,p.LOGGING_FAILED,1),Me(D.LOGGING_FAILED,this.options.slot,this.options.placementId)))}constructor(t,a){e(this,"options",void 0),e(this,"data",void 0),this.options=t,this.data=a}}var ht,wt;(wt=ht||(ht={})).BEGIN_TO_RENDER_CLIENT="btr_client",wt.COUNT_ON_DOWNLOAD_CLIENT="cod_client";const gt=(e,t,a,n,i)=>{const o=document.createElement("img");o.id=t,o.src=e,o.style.display="none",o.onload=n,o.onerror=i,a.appendChild(o)};var Et,St,yt,vt;!function(e){e.IFRAME_INIT="adload:iframeinitialized",e.RENDER_START="adload:renderstart",e.RENDER_END="adload:renderend",e.CREATIVE_WRITTEN="adload:creativewritten",e.IMP="adload:impression",e.UNSERVED_IMP="adload:unservedimpression",e.VIEWABILITY="adload:viewability",e.UNSERVED_VIEWABILITY="adload:unservedviewability",e.MEASURABILITY="adload:measurability",e.MEASUREMENT_HTML="adload:measurementhtml"}(Et||(Et={})),(yt=St||(St={})).REQUEST_START="adfetch:request",yt.PUNT_RETURNED="adfetch:punt",yt.ERROR_RETURNED="adfetch:error",yt.EMPTY_RESPONSE="adfetch:noad",yt.RENDERED_AD="adfetch:renderad",yt.RENDER_ERROR="adfetch:rendererror",yt.HTTP_ERROR="adfetch:httperror",yt.EXCEPTION="adfetch:exception",function(e){e.DEPENDENCIES_NOT_MET="ResourceTimingData.DependenciesNotMet"}(vt||(vt={}));var Tt,It,bt,At,Rt,Dt,_t;(It=Tt||(Tt={})).LEGACY_IMPRESSION_COUNTER="imp:legacy",It.GLOBAL_IMPRESSION_FIRED_COUNTER="impressionFired",(At=bt||(bt={})).LOADED="btr:loaded",At.ERROR="btr:error",At.IMPRESSION="btr:impression",At.NO_IMAGES="btr:noimages",At.TAGGED="btr:taggedcreative",(Dt=Rt||(Rt={})).POLL_END="crem:pollingcomplete",Dt.POLL_BTR="crem:pollingisbtr",function(e){e.START="bb",e.LEGACY_END="cf",e.END="ld",e.SCOPE_NAME="sfImpression",e.POLLING_SCOPE="PollingSfImpression"}(_t||(_t={}));const Nt=(e,t)=>{const a=(e,t)=>{var a,n;return null!==(n=null===(a=document.getElementById(e))||void 0===a?void 0:a.getAttribute(t))&&void 0!==n?n:null},n=a("ilmRelocatedHtml","data-relocated-html");n?De.sendMessageToAd(e,"sendRelocatedHtmlContentEncodedToAd",n):document.addEventListener("sendRelocatedHtmlContentEncodedToAd",(n=>{const i=a("ilmRelocatedHtml","data-relocated-html");i?De.sendMessageToAd(e,"sendRelocatedHtmlContentEncodedToAd",i):t()}),{once:!0})},Lt=(e,t)=>{let a;try{a=tt(e,"pj",{measurementMethod:ht.COUNT_ON_DOWNLOAD_CLIENT})}catch(e){return pe("Unable to add pj to impression URL",e),q(null,null,Ke.ERROR,1),void Me(Ze.ERROR)}gt(a,"ape_impression",t,(()=>{q(null,null,Ke.IMPRESSION+"loaded",1),Me(Ze.IMPRESSION+"loaded")}),(()=>{q(null,null,Ke.IMPRESSION+"error",1),Me(Ze.IMPRESSION+"error")})),q(null,null,Tt.GLOBAL_IMPRESSION_FIRED_COUNTER,1)};const Mt=new class{addAdHandler(e,t,a,n){this.ADS_HANDLERS[e]=this.ADS_HANDLERS[e]||{},this.ADS_HANDLERS[e][a]=H(n,pe,"Error within ad handler "+a+": "+t)}constructor(t){e(this,"ADS_HANDLERS",{}),e(this,"AD_IDS",{}),e(this,"AD_TRACERS",{}),e(this,"buildTimeReplacements",void 0),e(this,"supportedCommands",{sendAdBarTrace:(e,t)=>{e.options.arid in this.AD_TRACERS&&this.AD_TRACERS[e.options.arid].logTrace(t.field,t.traceInfo)},logAPIInvocation:(e,t)=>{q(null,null,l.API+t.apiName,1),q(e.options.slot,e.options.placementId,l.API+t.apiName,1),e.options.arid in this.AD_TRACERS&&this.AD_TRACERS[e.options.arid].logTrace("apiCalls",t)},resizeSafeFrameAd:e=>{window.addEventListener("resize",this.ADS_HANDLERS[e.options.arid].defaultResizeSafeFrameHandler),Te(e.options.arid,e.options.size.width,e.options.size.height,e.options.maxAdWidth,De,this.AD_IDS)},setResizePlacementStyle:e=>{window.addEventListener("resize",this.ADS_HANDLERS[e.options.arid].defaultSetResizePlacementStyle),ve(e.options.arid,this.AD_IDS,e.options.resizePlacementStyle)},changeSize:(e,t)=>{const a=e.options.allowedSizes;if(void 0===e.options.allowChangeSize||e.options.allowChangeSize)if(we(t,a,he))e.slot.style.width=t.width,e.iframe.height=t.height,e.iframe.width=t.width;else{pe("Size is not allowlisted: "+t.width+" x "+t.height+De.appendErrorDetails(e.options.arid))}},startPixelTracking:dt,startPixelTrackingForLegacyImpression:ct,startPixelTrackingForCremPolling:ut,collapseSlot:e=>{ye(this.AD_IDS[e.options.arid].placementDivId),ye(this.AD_IDS[e.options.arid].auiCardDeckId),"nav-sitewide-msg"===e.options.slotName&&Ae("amznJQ.available:navbarJSLoaded",(()=>{void 0!==parent.navbar&&"function"==typeof parent.navbar.unHideSWM&&parent.navbar.unHideSWM()}))},logError:(e,t)=>{pe(t.message+De.appendErrorDetails(e.options.arid)+": "+e.options.slot,t.error)},logCsaEvent:(e,t)=>{Me(t.metricName,e.options.slot,e.options.placementId)},addCsaEntity:(e,t)=>{Oe(t)},sendCsmLatencyMetric:(e,t)=>{j(t.metric,e.options.slot,e.options.placementId,t.metricMsg,t.timestamp)},markCsaLatencyMetric:(e,t)=>{Le(t.metric,t.timestamp)},countMetric:(e,t)=>{t.isGlobal?q(null,null,t.metricMsg,t.value):q(e.options.slot,e.options.placementId,t.metricMsg,t.value)},addCsmTag:(e,t)=>{t.isGlobal?Y(t.tag,null,null,t.msg):Y(t.tag,e.options.slot,e.options.placementId,t.msg)},fireViewableLatencyMetrics:(e,t)=>{var a,n,i,o;a=e.options.arid,n=e.options.slot,i=e.options.placementId,o=t.adLoadedTimestamp,window.apeViewableLatencyTrackers&&window.apeViewableLatencyTrackers[a]&&window.apeViewableLatencyTrackers[a].valid&&(window.apeViewableLatencyTrackers[a].loaded=!0,window.apeViewableLatencyTrackers[a].viewed&&(j("ld",n,i,"viewablelatency",o),Le("viewablelatency:loaded",o),q(n,i,"htmlviewed:loaded",1)))},customMessage:(e,t)=>{De.customMessage(t.key,t.body,e.options.allowlistedCustomMessageEvents,e.options.slot,e.options.placementId)},enableViewabilityTracker:e=>{De.updateViewability(e.options.arid);const t=ce(20,De.updateViewability);if(this.addAdHandler(e.options.arid,e.options.slot,"viewabilityTracker",(()=>{t(e.options.arid)})),window.addEventListener("scroll",this.ADS_HANDLERS[e.options.arid].viewabilityTracker),window.addEventListener("resize",this.ADS_HANDLERS[e.options.arid].viewabilityTracker),document.addEventListener("visibilitychange",this.ADS_HANDLERS[e.options.arid].viewabilityTracker),ge()){new IntersectionObserver((()=>{De.updateViewability(e.options.arid)}),{threshold:[0,.5,1]}).observe(e.slot)}},enableNoInventoryViewabilityTrackerAndInvokeFallback:e=>{De.takeSnapshotOfSlotPosition(e.options.arid),De.updateNoInventoryViewability(e.options.arid),De.sendMessageToAd(e.options.arid,"handleFallbackBehavior",{});const t=ce(20,De.updateNoInventoryViewability);this.addAdHandler(e.options.arid,e.options.slot,"noInventoryViewabilityTracker",(()=>{t(e.options.arid)})),window.addEventListener("scroll",this.ADS_HANDLERS[e.options.arid].noInventoryViewabilityTracker),window.addEventListener("resize",this.ADS_HANDLERS[e.options.arid].noInventoryViewabilityTracker),document.addEventListener("visibilitychange",this.ADS_HANDLERS[e.options.arid].noInventoryViewabilityTracker)},loadAdFeedback:(e,t)=>{const a=De.adMap[e.options.arid].iframe;e.options.adCreativeMetaData=t,Ce(a,e.options,this.AD_TRACERS)},safeFrameReady:e=>{var t;(null===(t=e.options.expParams)||void 0===t?void 0:t.ilmRelocatedHtmlIsActive)&&!e.options.htmlContentEncoded&&Nt(e.options.arid,(()=>{ye(this.AD_IDS[e.options.arid].placementDivId)}))},requestVideoAutoplay:(e,t)=>{Ue(e,t,De)},releaseVideoAutoplay:()=>{Ve()},haveVideoAutoplayPermission:e=>{Ge(e)},logSafeframeResourceTimingData:(e,t)=>{new ft(e,t).log()},saveAdDetailsForAdReporter:(e,t)=>{if(!window.adReporterConfig)return;window.adReporterDetails||(window.adReporterDetails={});const a=e.options.slotName;t&&a===t.slotName?window.adReporterDetails[a]=t:window.adReporterDetails[a]||(window.adReporterDetails[a]=JSON.stringify(e))}}),e(this,"initSafeFrame",(()=>{if(window.DAsf&&window.DAsf.loadAds)return void window.DAsf.loadAds();var e,t,i,o;window.DAsf={version:this.buildTimeReplacements.version},"t1"===(null===window||void 0===window||null===(e=window.renderingWeblabs)||void 0===e||null===(t=e.ADPT_SF_MRC_JAV_606654)||void 0===t?void 0:t.toLowerCase())?(q(null,null,Ke.TREATMENT,1),Ye().forEach((e=>{try{Lt(e,document.body),q(null,null,Ke.IMPRESSION,1),Me(Ze.IMPRESSION)}catch(e){q(null,null,Ke.ERROR,1),Me(Ze.ERROR)}}))):"c"===(null===window||void 0===window||null===(i=window.renderingWeblabs)||void 0===i||null===(o=i.ADPT_SF_MRC_JAV_606654)||void 0===o?void 0:o.toLowerCase())?q(null,null,Ke.CONTROL,1):(q(null,null,Ke.NO_WEBLAB,1),je()),window.csa&&(_e.events=window.csa("Events",{producerId:"adplacements"})),q(null,null,u.VERSION+":"+window.DAsf.version,1),Me(R.VERSION+window.DAsf.version),window.addEventListener("message",De.receiveMessage,!1),De.supportedCommands=this.supportedCommands,window.DAsf.registerCustomMessageListener=De.registerCustomMessageListener,window.DAsf.sendCustomMessage=De.sendCustomMessage;window.DAsf.loadAds=()=>{const e="data-arid",t=(e,t)=>{this.AD_IDS[e]={slotId:t,placementDivId:"ape_"+t+"_placement",iframeId:"ape_"+t+"_iframe",auiCardDeckId:"ape_"+t+"_aui_cardDeck"}},i=e=>{const t={};try{const a=window.location.search.substring(1).split("&");for(let n=0;n<a.length;n++){const i=a[n].split("="),o=i[0];i.length>1&&e.indexOf(o)>-1&&(t[o]=i[1])}}catch(e){pe("Error parsing query parameters",e)}return t},o=e=>()=>{Te(e.arid,e.size.width,e.size.height,e.maxAdWidth,De,this.AD_IDS)},s=e=>()=>{ve(e.arid,this.AD_IDS,e.resizePlacementStyle)},r=e=>{try{const t=document.getElementById(this.AD_IDS[e.arid].placementDivId),a=this.AD_IDS[e.arid].iframeId,i=e.safeFrameSrc,o=Se(e,a,i);o.onload=()=>{L(e.DAsfUrl,e.safeFrameSrc,e.slot,e.placementId,q,Me)},t.appendChild(o),j("cf",e.slot,e.placementId),Le("criticalFeature"),q(e.slot,e.placementId,n.IFRAME_CREATED,1),Me(S.IFRAME_CREATED,e.slot,e.placementId),De.adMap[e.arid]={slot:t,iframe:o,options:e};const s={id:o.id,src:o.src,scrolling:o.scrolling,height:o.height,width:o.width,className:o.className,styleCssText:o.style.cssText,sandbox:o.sandbox};this.AD_TRACERS[e.arid].logTrace("createSafeFrame",s)}catch(t){pe("Error creating safeFrame",t),this.AD_TRACERS[e.arid]&&this.AD_TRACERS[e.arid].logTrace("createSafeFrame",{error:{message:"errorCreatingSafeFrame",ex:t}})}},d=t=>H((()=>{const a={callbackOccurred:!0};a.loadAfter=t.loadAfter,this.AD_TRACERS[t.arid].logTrace("pageCallBack",a),q(t.slot,t.placementId,n.CALLBACK,1),Me(S.CALLBACK,t.slot,t.placementId);if(((t,a)=>{if(!t)return!1;const n=document.getElementById(t);if(n&&!n.innerHTML){const t=n.getAttribute(e);if(t&&t===a.arid)return!0}return!1})(this.AD_IDS[t.arid].placementDivId,t)){var i;r(t);const e=null===(i=null==De?void 0:De.adMap[null==t?void 0:t.arid])||void 0===i?void 0:i.iframe;e&&Pe(e,t,this.AD_TRACERS)}}),pe,"Error in callback to create Safeframe."),l="text/x-dacx-safeframe";let u=document.getElementsByClassName(l);0===u.length&&(u=document.getElementsByTagName("script"));for(const r of u)if("DIV"===r.tagName&&r.classList.contains(l)||r.getAttribute("type")===l)try{const l=W(r.getAttribute("data-csa-c-slot-id")),u=l||JSON.parse(r.getAttribute("data-ad-details")||r.text||r.innerHTML||r.innerText);xe(u);const f="ape_"+u.slot+"_placement",h=document.getElementById(f);!De.adMap[u.arid]&&h&&h.innerHTML&&(h.innerHTML="",r.removeAttribute(e)),Ne(h);if(r.getAttribute(e))continue;u.arid=u.arid||Math.random().toString(16).slice(2),this.AD_TRACERS[u.arid]=new a(u.traceId,window[u.slotName]&&window[u.slotName].adStartTime||0),this.AD_TRACERS[u.arid].logTrace("safeFrameInput",u);const w={caches:window.caches?window.caches:null,plugins:document.plugins?document.plugins:null,cookies:document.cookie?document.cookie:null,userAgents:navigator.userAgent?navigator.userAgent:null};this.AD_TRACERS[u.arid].logTrace("browserData",w),r.setAttribute(e,u.arid),u.hostDomain=location.protocol+"//"+location.host,u.allowedSizes="object"==typeof u.allowedSizes&&u.allowedSizes.length>=0?u.allowedSizes.concat(u.size):[u.size];const E="d3l3lkinz3f56t.cloudfront.net,g-ecx.images-amazon.com,z-ecx.images-amazon.com,images-na.ssl-images-amazon.com,g-ec4.images-amazon.com,images-cn.ssl-images-amazon.com".split(",");if(u.allowedDomains="object"==typeof u.allowedDomains&&u.allowedDomains.length>=0?u.allowedDomains.concat(E):E,u.queryParams=i(u.allowlistedQueryParamKeys),u.aPageStart=window.aPageStart,u.adStartTime=window[u.slotName]&&window[u.slotName].adStartTime||0,this.addAdHandler(u.arid,u.slot,"defaultResizeSafeFrameHandler",o(u)),this.addAdHandler(u.arid,u.slot,"defaultSetResizePlacementStyle",s(u)),t(u.arid,u.slot),"clickTracking"in u&&""===u.clickTracking&&(u.clickTracking=z(u)),u.forcePunt){Y("forcePunt",u.slot,u.placementId),Oe({forcePunt:"true"}),ye(this.AD_IDS[u.arid].placementDivId);continue}const y=me(),v="true"===u.abpAcceptable&&("1"===u.abpStatus||"-1"===u.abpStatus);if(p=u.mediaType,m=u.adCreativeMetaData.adProgramId,(e=>"V"===e)(p)&&!V.hasOwnProperty(m)){const e=y+this.buildTimeReplacements.desktopSafeFrameVideoPath,t=y+this.buildTimeReplacements.allowlistedSafeFrameVideoPath;u.safeFrameSrc=v?t:e}else{const e=y+this.buildTimeReplacements.desktopSafeFramePath,t=y+this.buildTimeReplacements.allowlistedSafeFramePath;u.safeFrameSrc=v?t:e}if(u.abpStatus){Y("ABPStatus"+G[u.abpStatus],u.slot),Oe({ABPStatus:G[u.abpStatus]});for(const e in G)q(u.slot,u.placementId,c[e],u.abpStatus===e?1:0),u.abpStatus===e&&Me(A[e],u.slot,u.placementId)}u.collectSafeframeRTD=window.collectSafeframeRTD,j("af",u.slot,u.placementId),Le("clickToATF"),j(g.START,u.slot,u.placementId,g.SCOPE_NAME),j(g.START,u.slot,u.placementId,g.POLLING_SCOPE),q(u.slot,u.placementId,n.START,1),Me(S.START,u.slot,u.placementId);const T={hostDomain:u.hostDomain,allowedSizes:u.allowedSizes,allowedDomains:u.allowedDomains,queryParams:u.queryParams,aPageStart:u.aPageStart,adStartTime:u.adStartTime,safeFrameSrc:u.safeFrameSrc,abpStatus:u.abpStatus};Ae(u.loadAfter,d(u),0,r),T.loadAfter=u.loadAfter,this.AD_TRACERS[u.arid].logTrace("additionalInitilizationParams",T)}catch(e){pe("Error parsing sf tag",e)}var p,m},window.DAsf.loadAds()})),this.buildTimeReplacements=t}}({version:"1.50.139b902",desktopSafeFrameVideoPath:"/images/S/apesafeframe/ape/sf/desktop/sfVideo-1.50.139b902.html",allowlistedSafeFrameVideoPath:"/images/S/apesafeframe/ape/sf/whitelisted/desktop/sfVideo-1.50.139b902.html",desktopSafeFramePath:"/images/S/apesafeframe/ape/sf/desktop/sf-1.50.139b902.html",allowlistedSafeFramePath:"/images/S/apesafeframe/ape/sf/whitelisted/desktop/sf-1.50.139b902.html"});H((()=>Mt.initSafeFrame()),pe,"Error initializing safeFrame")()}();
//# sourceMappingURL=DAsf.min.js.map
